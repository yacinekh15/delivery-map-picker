<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø§Ø®ØªÙŠØ§Ø± Ù…ÙˆÙ‚Ø¹ Ø§Ù„ØªØ³Ù„ÙŠÙ…</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<style>
  #map { height: 400px; }
  body { font-family: sans-serif; padding: 10px; }
</style>
</head>

<body>

<h3>ğŸ“ Ø§Ø®ØªØ± Ù†Ù‚Ø·Ø© Ø§Ù„ØªØ³Ù„ÙŠÙ…</h3>
<p id="coords">Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù…ÙˆÙ‚Ø¹ Ø¨Ø¹Ø¯</p>

<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>

// Center map on Djelfa
// Djelfa coordinates: 34.6728Â° N, 3.2630Â° E
var map = L.map('map').setView([34.6728, 3.2630], 13);

// Light mode (default OpenStreetMap tiles)
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  maxZoom: 19
}).addTo(map);

var marker;

// On click: choose drop-off location
map.on('click', function(e) {
    var lat = e.latlng.lat.toFixed(6);
    var lng = e.latlng.lng.toFixed(6);

    // Remove previous marker if exists
    if (marker) {
        map.removeLayer(marker);
    }

    // Add new marker
    marker = L.marker([lat, lng]).addTo(map);

    // Show coordinates to user
    document.getElementById("coords").innerText = 
      "ğŸ“ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª: " + lat + ", " + lng;

    // Send coordinates back to parent iframe (optional)
    window.parent.postMessage(
        { dropoff_lat: lat, dropoff_lng: lng },
        "*"
    );
});

</script>

</body>
</html>
