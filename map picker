<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø§Ø®ØªÙŠØ§Ø± Ù†Ù‚Ø·Ø© Ø§Ù„ØªØ³Ù„ÙŠÙ…</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
 integrity="sha256-o9N1j8pA2Bvk+9+z+YDp0s+HRH2pvI6z3b6u6d6Y0Mo="
 crossorigin=""/>
<style>
  #map { height: 400px; width: 100%; }
  body { font-family: sans-serif; padding: 10px; }
</style>
</head>
<body>

<h3>ğŸ“ Ø§Ø®ØªØ± Ù†Ù‚Ø·Ø© Ø§Ù„ØªØ³Ù„ÙŠÙ…</h3>
<p id="coords">Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù…ÙˆÙ‚Ø¹ Ø¨Ø¹Ø¯</p>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
 integrity="sha256-9+0D1yU0u0sX1Rkg5l6+O2xXlVcxFV3pG1qslMjgN4U="
 crossorigin=""></script>

<script>
// Center map on Djelfa
var map = L.map('map').setView([34.6728, 3.2630], 13);

// OpenStreetMap tiles (light mode)
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  maxZoom: 19
}).addTo(map);

var marker;

// Click to select drop-off point
map.on('click', function(e) {
    var lat = e.latlng.lat.toFixed(6);
    var lng = e.latlng.lng.toFixed(6);

    if (marker) map.removeLayer(marker); // remove old marker

    marker = L.marker([lat, lng]).addTo(map);

    document.getElementById("coords").innerText = 
      "ğŸ“ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª: " + lat + ", " + lng;

    // Optional: send to parent iframe
    window.parent.postMessage(
        { dropoff_lat: lat, dropoff_lng: lng },
        "*"
    );
});
</script>

</body>
</html>

